<!doctype html>
<html lang="en">
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="assets/css/sticky-style.css" type="text/css">
    <link rel="stylesheet" href="assets/css/high-charts-style.css" type="text/css">
    <link rel="stylesheet" href="assets/css/accordion.css" type="text/css">

    <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="pureScriptSelect/dist/multi-select.css">
    <script src="assets/js/accordion.js"></script>


    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{{ title }}</title>    
    </head>

         <div class="header">
            <img src="https://assets.nationbuilder.com/detroitdsa/sites/1/meta_images/original/DetroitDSA%E2%80%93Color-transp.png?1558835458"></img>
        </div>



<main class="content">

    <section class="sub-content">
            <h2>FAQ</h2>
          <button class="accordion">What is district 12?</button>
           <div class="panel">
             <p>Lorem ipsum...</p>
           </div>
           
           <button class="accordion">What is AIPAC?</button>
           <div class="panel">
             <p>Lorem ipsum...</p>
           </div>
           
           <button class="accordion">Why does AIPAC care about the 12th district?</button>
           <div class="panel">
             <p>Lorem ipsum...</p>
           </div>
            <button class="accordion">What are PACs?</button>
           <div class="panel">
             <p>Lorem ipsum...</p>
           </div>
            <button class="accordion">Whoâ€™s running against Rashida?</button>
           <div class="panel">
             <p>Lorem ipsum...</p>
           </div>
            <button class="accordion">Who is Detroti DSA?</button>
           <div class="panel">
             <p>Lorem ipsum...</p>
           </div>
  </section>
  <section class="main-content">
        <div>
            <h2>Total Support</h2>
            <p class="total-donation" id="total-donation">$0</p>
        </div>
            <h2>
                PACs funding in this race
            </h2>

        </div>

        <div  id = "graphs">

        </div>
        <h2>
            Wall of Shame
        </h2>

         <div class="swiper">
            <div class="swiper-wrapper" style="height: 95%;">
                {% for row in donors %}
                    <div class="swiper-slide"> 
                        <img class="slide-image" src="https://www.politicscentral.org/wp-content/uploads/2017/08/Janice-Winfrey-534x640.jpg"></img>
                        <h3>
                            {{ row.contributor_first_name }} {{ row.contributor_last_name }}
                        </h3>
                        <p>Contribution Total: ${{row.contribution_receipt_amount}}</p>
                        {{ row.committee_name }} -  - 
                    </div>
                {% endfor %}
            </div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>
        <div>
            <h2>Fed Up?</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Tempor nec feugiat nisl pretium fusce id. Gravida dictum fusce ut placerat orci nulla. Quis hendrerit dolor magna eget. Felis donec et odio pellentesque diam volutpat commodo sed. Mi tempus imperdiet nulla malesuada. Mattis nunc sed blandit libero volutpat sed. Tellus molestie nunc non blandit massa enim. Tincidunt dui ut ornare lectus. Sed arcu non odio euismod lacinia at quis. Amet venenatis urna cursus eget nunc scelerisque viverra mauris. Vestibulum morbi blandit cursus risus at ultrices mi tempus imperdiet. Sed elementum tempus egestas sed. Mattis rhoncus urna neque viverra justo nec ultrices dui sapien.</p>
        </div>
        </div>
 </section>

  
</main>

<script>
var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.maxHeight) {
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + "px";
    } 
  });
}
</script>

<script>
Highcharts.chart('graphs', {
    chart: {
        type: 'pie'
    },
    title: {
        text: 'Browser market shares. January, 2018'
    },
    subtitle: {
        text: 'Click the slices to view versions. Source: <a href="http://statcounter.com" target="_blank">statcounter.com</a>'
    },

    accessibility: {
        announceNewData: {
            enabled: true
        },
        point: {
            valueSuffix: '%'
        }
    },

    plotOptions: {
        series: {
            dataLabels: {
                enabled: true,
                format: '{point.name}: {point.y:.1f}%'
            }
        }
    },

    tooltip: {
        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
        pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
    },

    series: [
        {
            name: "Browsers",
            colorByPoint: true,
            data: [
                {
                    name: "Chrome",
                    y: 62.74,
                    drilldown: "Chrome"
                },
                {
                    name: "Firefox",
                    y: 10.57,
                    drilldown: "Firefox"
                },
                {
                    name: "Internet Explorer",
                    y: 7.23,
                    drilldown: "Internet Explorer"
                },
                {
                    name: "Safari",
                    y: 5.58,
                    drilldown: "Safari"
                },
                {
                    name: "Edge",
                    y: 4.02,
                    drilldown: "Edge"
                },
                {
                    name: "Opera",
                    y: 1.92,
                    drilldown: "Opera"
                },
                {
                    name: "Other",
                    y: 7.62,
                    drilldown: null
                }
            ]
        }
    ],
    drilldown: {
        series: [
            {
                name: "Chrome",
                id: "Chrome",
                data: [
                    ["v65.0",0.1],
                    ["v64.0",1.3],
                    ["v63.0",53.02],
                    ["v62.0",1.4],
                    ["v61.0",0.88],
                    ["v60.0",0.56],
                    ["v59.0",0.45],
                    ["v58.0",0.49],
                    ["v57.0",0.32],
                    ["v56.0",0.29],
                    ["v55.0",0.79],
                    ["v54.0",0.18],
                    ["v51.0",0.13],
                    ["v49.0",2.16],
                    ["v48.0",0.13],
                    ["v47.0",0.11],
                    ["v43.0",0.17],
                    ["v29.0",0.26]
                ]
            },
            {
                name: "Firefox",
                id: "Firefox",
                data: [
                    ["v58.0",1.02],
                    ["v57.0",7.36],
                    ["v56.0",0.35],
                    ["v55.0",0.11],
                    ["v54.0",0.1],
                    ["v52.0",0.95],
                    ["v51.0",0.15],
                    ["v50.0", 0.1],
                    ["v48.0", 0.31],
                    ["v47.0",0.12]
                ]
            },
            {
                name: "Internet Explorer",
                id: "Internet Explorer",
                data: [
                    ["v11.0", 6.2],
                    ["v10.0", 0.29],
                    ["v9.0",0.27],
                    ["v8.0",0.47]
                ]
            },
            {
                name: "Safari",
                id: "Safari",
                data: [
                    ["v11.0",3.39],
                    ["v10.1",0.96],
                    ["v10.0",0.36],
                    ["v9.1",0.54],
                    ["v9.0",0.13],
                    ["v5.1",0.2]
                ]
            },
            {
                name: "Edge",
                id: "Edge",
                data: [
                    ["v16",2.6],
                    ["v15",0.92],
                    ["v14",0.4],
                    ["v13",0.1]
                ]
            },
            {
                name: "Opera",
                id: "Opera",
                data: [
                    ["v50.0",0.96],
                    ["v49.0",0.82],
                    ["v12.1",0.14]
                ]
            }
        ]
    }
});

</script>


<script>

    var total_amount = 0;
    
    const candidatesjs = {{ collections.candidates | dump(2) | safe }};
    const tagjs =  {{ collections.Tags | dump(2) | safe }};
    const arr =  {{ donors | dump(2) | safe }};

    arr.forEach(element => {
    if (element["Candidate"] == "Janice Winfrey")
    {
            total_amount = total_amount + parseInt(element["contribution_receipt_amount"]);
    } 
    });
    function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function donationTickerReal()
    {
        donation = document.getElementById("total-donation");
        donation.innerText = "$0";
        var amount = 0.0;
        for(const element of arr){
        if (element["Candidate"] == "Janice Winfrey")
        {
            amount = amount + parseInt(element["contribution_receipt_amount"]);
            donation.innerText = "$"+ (Math.round(amount * 100) / 100).toLocaleString();
        }
        await sleep(40);
        };
        donation.innerText = "$"+ (Math.round(total_amount * 100) / 100).toLocaleString(); 

    }

    donationTickerReal();    

    
</script>



    <script>
        const swiper = new Swiper('.swiper', {
        // Optional parameters
        direction: 'horizontal',
        loop: true,
        slidesPerView:3,
        spaceBetween:4,
        slidesOffsetAfter:15,
        slidesOffsetBefore:15,
        centeredSlides: true,
        // Navigation arrows
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },

          });  
    </script>
</html>